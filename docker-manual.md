# Данный файл представляет собой инструкцию по использованию docker-контейнера с работающим веб-сервисом.

## Запуск Docker-контейнера

Ссылка на Docker-образ:
```
https://hub.docker.com/r/forch2002/detection-service-image
```

После скачивания Docker-образа, для запуска контейнера нам понадобится ID этого образа. Посмотреть его можно с помощью команды:
```
docker images --no-trunc
```

![image](https://github.com/vladparh/Image-classification-2023/assets/136927535/2d6c3cb6-d72e-4e28-abf2-4ee2cfaa4083)


ID образа также можно посмотреть через Docker Desktop:

![image](https://github.com/vladparh/Image-classification-2023/assets/136927535/546ca1bb-7b85-4291-9c32-af1eb350563f)

Чтобы запустить Docker-контейнер, выполните команду ниже, вставив после "-p 8000:8000" ID образа, полученный ранее:

```
docker run -p 8000:8000 902c212f6b095b60bb212c00fbd7804f6f6628b1ff309af0f3213b7cd852cf36
```

После чего веб-сервис заработает локально и буден доступен по следующему адресу: 
```
http://localhost:8000/
```

Если что-то не заработает, можете проверить актуальный адрес в Docker Desktop:

![image](https://github.com/vladparh/Image-classification-2023/assets/136927535/175ffd17-9aff-44d6-955d-6c662a6371ef)

## Использование веб-сервиса

Доступны пять методов взаимодействия:

1) GET:  /check - проверка статуса работы сервиса
2) GET:  /help - справка о использовании
3) POST: /uploadfile - загрузить изображение и получить ответ (изображение с классификацией объектов)
4) GET: /last - получение информации о последнем загруженном изображении
5) POST: /mode - изменить режим работы модели

Поговорим подробнее про 3 и 5 методы. Чтобы загрузить изображение, можно использовать любое приложение для тестирования API. Разберём на примере Postman. Для этого нужно выбрать метод POST, Params : Body -> form-data, в качестве параметра указать "file", также тип параметра "File", после чего загрузить изображение. Пример показан на скриншоте ниже.

![image](https://github.com/vladparh/Image-classification-2023/assets/136927535/c1f863c9-560e-45fa-b67f-6f301692ef00)

_Важное замечание: метод /uploadfile/ **обязательно** должен заканчиваться на '/', иначе загрузить изображение не получиться_

Метод /mode определяет, какие изображения будет возвращать модель - обычные, или чёрно-белые. В данном случае метод POST поддерживает два параметра: "gray" и "default". В качестве параметра указывайте "mode", как на примере ниже.

![image](https://github.com/vladparh/Image-classification-2023/assets/136927535/022cd01f-19e2-4aff-a180-745b8e484e48)


